<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meu Perfil - AgropecuÃ¡ria Polar</title>

    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/perfil.css">
  </head>
  <body>
    <!-- Header do Site -->
    <div class="site-header">
      <h1>ğŸ¾ AgropecuÃ¡ria Polar</h1>
      <p>Seu parceiro no cuidado com os animais</p>
    </div>

    <div class="nav-bar">
      <a href="/" class="btn-voltar">â† Voltar ao InÃ­cio</a>
    </div>

    <!-- Container Principal -->
    <div class="container">
      <!-- Header do Perfil -->
      <div class="profile-header">
        <div class="profile-photo-section">
          <img
            src="<%= usuario.Imagem || 'https://via.placeholder.com/120' %>"
            alt="Foto de perfil"
            class="profile-photo"
            id="profilePhoto"
          />
          <input type="file" id="photoInput" accept="image/*" />
          <div class="profile-info">
            <h2 id="displayName"><%= usuario.Nome %></h2>
            <p id="displayEmail"><%= usuario.Email %></p>
            <p class="upload-hint">ğŸ“¸ Clique na foto para alterar</p>
          </div>
        </div>
        <button class="btn-logout" onclick="logout()">ğŸšª Sair da Conta</button>
      </div>

      <!-- Grid de Cards -->
      <div class="cards-grid">
        <!-- Card: InformaÃ§Ãµes Pessoais -->
        <div class="card">
          <div class="card-header">
            <h3><span class="icon">ğŸ‘¤</span> InformaÃ§Ãµes Pessoais</h3>
            <button class="btn-edit" onclick="toggleEdit('pessoais')">
              âœï¸ Editar
            </button>
          </div>

          <div id="viewPessoais">
            <div class="info-group">
              <div class="info-label">Nome Completo</div>
              <div class="info-value" id="viewNome"><%= usuario.Nome %></div>
            </div>
            <div class="info-group">
              <div class="info-label">CPF</div>
              <div class="info-value" id="viewCpf"><%= usuario.Cpf %></div>
            </div>
            <div class="info-group">
              <div class="info-label">Email</div>
              <div class="info-value" id="viewEmail"><%= usuario.Email %></div>
            </div>
            <div class="info-group">
              <div class="info-label">Telefone</div>
              <div class="info-value" id="viewTelefone"><%= usuario.Telefone || 'NÃ£o informado' %></div>
            </div>
          </div>

          <div id="editPessoais" class="hidden">
            <div class="form-group">
              <label>Nome Completo</label>
              <input type="text" id="editNome" value="<%= usuario.Nome %>" />
            </div>
            <div class="form-group">
              <label>CPF (nÃ£o editÃ¡vel)</label>
              <input type="text" id="editCpf" value="<%= usuario.Cpf %>" disabled />
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="editEmail" value="<%= usuario.Email %>" />
            </div>
            <div class="form-group">
              <label>Telefone</label>
              <input type="text" id="editTelefone" value="<%= usuario.Telefone || '' %>" />
            </div>
            <button class="btn-save" onclick="savePessoais()">
              ğŸ’¾ Salvar AlteraÃ§Ãµes
            </button>
            <button class="btn-cancel" onclick="toggleEdit('pessoais')">
              âŒ Cancelar
            </button>
          </div>
        </div>

        <!-- Card: EndereÃ§o -->
        <div class="card">
          <div class="card-header">
            <h3><span class="icon">ğŸ“</span> EndereÃ§o</h3>
            <button class="btn-edit" onclick="toggleEdit('endereco')">
              âœï¸ Editar
            </button>
          </div>

          <div id="viewEndereco">
            <div class="info-group">
              <div class="info-label">CEP</div>
              <div class="info-value" id="viewCep"><%= usuario.ENDERECO.Cep %></div>
            </div>
            <div class="info-group">
              <div class="info-label">Rua</div>
              <div class="info-value" id="viewRua"><%= usuario.ENDERECO.Rua %></div>
            </div>
            <div class="info-group">
              <div class="info-label">NÃºmero</div>
              <div class="info-value" id="viewNumero"><%= usuario.ENDERECO.Numero %></div>
            </div>
            <div class="info-group">
              <div class="info-label">Bairro</div>
              <div class="info-value" id="viewBairro"><%= usuario.ENDERECO.Bairro %></div>
            </div>
            <div class="info-group">
              <div class="info-label">Cidade - Estado</div>
              <div class="info-value">
                <span id="viewCidade"><%= usuario.ENDERECO.Cidade %></span> -
                <span id="viewEstado"><%= usuario.ENDERECO.Estado %></span>
              </div>
            </div>
          </div>

          <div id="editEndereco" class="hidden">
            <div class="form-group">
              <label>CEP</label>
              <input type="text" id="editCep" value="<%= usuario.ENDERECO.Cep %>" />
            </div>
            <div class="form-group">
              <label>Rua</label>
              <input type="text" id="editRua" value="<%= usuario.ENDERECO.Rua %>" />
            </div>
            <div class="form-group">
              <label>NÃºmero</label>
              <input type="text" id="editNumero" value="<%= usuario.ENDERECO.Numero %>" />
            </div>
            <div class="form-group">
              <label>Bairro</label>
              <input type="text" id="editBairro" value="<%= usuario.ENDERECO.Bairro %>" />
            </div>
            <div class="form-group">
              <label>Cidade</label>
              <input type="text" id="editCidade" value="<%= usuario.ENDERECO.Cidade %>" />
            </div>
            <div class="form-group">
              <label>Estado</label>
              <input type="text" id="editEstado" value="<%= usuario.ENDERECO.Estado %>" maxlength="2" />
            </div>
            <button class="btn-save" onclick="saveEndereco()">
              ğŸ’¾ Salvar AlteraÃ§Ãµes
            </button>
            <button class="btn-cancel" onclick="toggleEdit('endereco')">
              âŒ Cancelar
            </button>
          </div>
        </div>

        <!-- Card: SeguranÃ§a -->
        <div class="card">
          <div class="card-header">
            <h3><span class="icon">ğŸ”’</span> SeguranÃ§a</h3>
          </div>

          <div class="form-group">
            <label>Senha Atual</label>
            <input
              type="password"
              id="senhaAtual"
              placeholder="Digite sua senha atual"
            />
          </div>
          <div class="form-group">
            <label>Nova Senha</label>
            <input
              type="password"
              id="novaSenha"
              placeholder="Digite a nova senha"
            />
          </div>
          <div class="form-group">
            <label>Confirmar Nova Senha</label>
            <input
              type="password"
              id="confirmarSenha"
              placeholder="Confirme a nova senha"
            />
          </div>
          <button class="btn-save" onclick="alterarSenha()">
            ğŸ”‘ Alterar Senha
          </button>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>Â© 2024 AgropecuÃ¡ria Polar - Todos os direitos reservados</p>
    </div>

    <script src="/js/perfil.js"></script>
  </body>
</html>